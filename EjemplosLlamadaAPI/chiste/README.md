**CONSUMO API**
**CHISTE**
1. Se crea el componente normal donde iría la llamada a API (la llamada a API en sí no es un componente especifico, sino que va dentro del componente que lo usará).
2. Se crea documento .jsx (porque será un componente de React) También irá con la primera letra en mayúscula. 
3.  Se crea el componente de forma normal: 
```javascript
const Chiste = () => {

  return (
    <>
    </>
  )
}

export default Chiste
//-------------Se llama al componente donde se vaya a usar: En index.js:
<main>
    <Chiste></Chiste>
</main>
```
4. Se crea función de llamada a API
```javascript
const Chiste = () => {
    const llamadaAPI = async () =>  {
        try{
        //-------------Const para guardar el link importante AWAIT 
        const llamada = await fetch('https://v2.jokeapi.dev/joke/Programming?lang=es')
        //-------------Se convierten los datos a .json
        const datos = await llamada.json()
        //-------------Se imprimen (opcional es para ver que salen)
        console.log("datos",datos)
        }
        catch(error){
            console.log("error detectado", error);
        }
    }

  return (
    <>
    </>
  )
}

export default Chiste
```
5. Se meten los datos en un useState
6. Se pone el botón y se llama en el return a los datos que quiero mostrar que están guardados en el useState

```javascript
import React, {useState} from 'react'

const Chiste = () => {

    const [datosAPI, setDatosAPI] = useState("Aún no me has contado ningún chiste")

    const llamadaAPI = async () =>  {
        try{
        const llamada = await fetch('https://v2.jokeapi.dev/joke/Programming?lang=es')
        const datos = await llamada.json()
        console.log("datos",datos)
        //Se meten los datos en la variable del useState y se especifica la clave:valor que se coge.
        setDatosAPI({setup:datos.setup, delivery:datos.delivery, joke:datos.joke})
        }
        catch(error){
            console.log("error detectado", error);
        }
    }
llamadaAPI(); //--------eliminar esta linea a llamar desde useEffect

//Se pone el botón y se llama en el return a los datos que quiero mostrar que estan guarados en el useState. 
//Al tratarse de un Array hay que especificar que parte del array quiero mostrar
  return (
    <>
    //------------datos que quiero mostrar: 
    <div>Chiste:</div>
    {datosAPI.setup}
    <br></br>
    {datosAPI.delivery}
    <br></br>
    {datosAPI.joke}
    //---------------botón para llamar a API y que muestre info
    <button onClick={()=>{llamadaAPI()}}>Cuéntame un chiste</button>
    </>
  )
}

export default Chiste
```
7. Por último la llamada a API se mete dentro de useEffect para que se renderice solo cuando sea necesario y solo una vez.

```javascript
// Llamada a API de chistes:
import React,{useEffect, useState} from 'react'

const Chiste = () => {

    const [datosAPI, setDatosAPI] = useState("Aún no me has contado ningún chiste")

    useEffect(() => {
        llamadaAPI()
    }, [])
    

    const llamadaAPI = async () =>  {
        try{
        const llamada = await fetch('https://v2.jokeapi.dev/joke/Programming?lang=es')
        const datos = await llamada.json()
        console.log("datos",datos)
        setDatosAPI({setup:datos.setup, delivery:datos.delivery, joke:datos.joke})
        }
        catch(error){
            console.log("error detectado", error);
        }
    }


  return (
    <>
    //------------datos que quiero mostrar: 
    <div>Chiste:</div>
    {datosAPI.setup}
    <br></br>
    {datosAPI.delivery}
    <br></br>
    {datosAPI.joke}
    //---------------botón para llamar a API y que muestre info
    <button onClick={()=>{llamadaAPI()}}>Cuéntame un chiste</button>
    </>
  )
}

export default Chiste

//--------------------------------------------------------------------
//-------------------En index: Solo se llama al componente------------
import Head from 'next/head'
import { Inter } from 'next/font/google'
import styles from '@/styles/Home.module.css'
import Chiste from '@/components/chiste'

const inter = Inter({ subsets: ['latin'] })

export default function Home() {
  return (
    <>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main className={`${styles.main} ${inter.className}`}>
      //---------------LLAMADA AL COMPONENTE--------------------
        <Chiste></Chiste>
      
      </main>
    </>
  )
}
```
